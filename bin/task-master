#!/usr/bin/env node

// TaskMaster CLI Entry Point
// Run the actual CLI script with tsx for TypeScript imports

import { spawn } from 'child_process';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// The scripts/dev.js imports from TypeScript packages (@tm/core)
// We need to use tsx to handle the TypeScript imports
const scriptPath = path.join(__dirname, '..', 'scripts', 'dev.js');

// Use tsx from node_modules/.bin
const tsxCmd = process.platform === 'win32' ?
  path.join(__dirname, '..', 'node_modules', '.bin', 'tsx.cmd') :
  path.join(__dirname, '..', 'node_modules', '.bin', 'tsx');

// Run with tsx to handle TypeScript imports
const child = spawn(tsxCmd, [scriptPath, ...process.argv.slice(2)], {
  stdio: 'inherit',
  env: process.env
});

child.on('exit', (code) => {
  process.exit(code);
});